# Zerocut æŠ€æœ¯æ ˆé€‰å‹å’Œå¼€å‘è§„èŒƒ

## ğŸ¯ æŠ€æœ¯é€‰å‹åŸåˆ™

### é€‰å‹æ ‡å‡†

1. **æˆç†Ÿç¨³å®š**: é€‰æ‹©ç»è¿‡ç”Ÿäº§éªŒè¯çš„æˆç†ŸæŠ€æœ¯
2. **ç¤¾åŒºæ´»è·ƒ**: æ‹¥æœ‰æ´»è·ƒçš„å¼€æºç¤¾åŒºå’Œä¸°å¯Œçš„ç”Ÿæ€
3. **å›¢é˜Ÿç†Ÿæ‚‰**: å›¢é˜Ÿå…·å¤‡ç›¸å…³æŠ€æœ¯ç»éªŒæˆ–å­¦ä¹ æˆæœ¬å¯æ§
4. **æ€§èƒ½ä¼˜å…ˆ**: æ»¡è¶³é«˜å¹¶å‘å’Œä½å»¶è¿Ÿè¦æ±‚
5. **å¯ç»´æŠ¤æ€§**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œä¾¿äºé•¿æœŸç»´æŠ¤
6. **æ‰©å±•æ€§**: æ”¯æŒä¸šåŠ¡å¿«é€Ÿå¢é•¿å’ŒåŠŸèƒ½æ‰©å±•

### æŠ€æœ¯å†³ç­–çŸ©é˜µ

| æŠ€æœ¯é¢†åŸŸ | å€™é€‰æ–¹æ¡ˆ                 | æœ€ç»ˆé€‰æ‹©          | é€‰æ‹©ç†ç”±                                |
| -------- | ------------------------ | ----------------- | --------------------------------------- |
| å‰ç«¯æ¡†æ¶ | React/Vue/Angular        | **Vue 3**         | ç»„åˆå¼APIã€å“åº”å¼ç³»ç»Ÿä¼˜ç§€ã€å­¦ä¹ æ›²çº¿å¹³ç¼“ |
| çŠ¶æ€ç®¡ç† | Vuex/Pinia/Zustand       | **Pinia**         | Vueå®˜æ–¹æ¨èã€TypeScriptå‹å¥½ã€å¼€å‘ä½“éªŒå¥½ |
| åç«¯æ¡†æ¶ | Express/Fastify/Koa      | **Express.js**    | æˆç†Ÿç¨³å®šã€ä¸­é—´ä»¶ä¸°å¯Œã€ç¤¾åŒºæ´»è·ƒ          |
| æ•°æ®åº“   | PostgreSQL/MySQL/MongoDB | **PostgreSQL 17** | åŠŸèƒ½å¼ºå¤§ã€JSONæ”¯æŒã€ACIDç‰¹æ€§            |
| ORMæ¡†æ¶  | Prisma/TypeORM/Sequelize | **TypeORM**       | è£…é¥°å™¨è¯­æ³•ã€Active Recordæ¨¡å¼ã€åŠŸèƒ½å®Œæ•´ |
| ç¼“å­˜æ–¹æ¡ˆ | Redis/Memcached          | **Redis 7.x**     | åŠŸèƒ½ä¸°å¯Œã€æ•°æ®ç»“æ„å¤šæ ·ã€æŒä¹…åŒ–          |

## ğŸ› ï¸ å‰ç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```json
{
  "framework": "Vue 3.4+",
  "language": "TypeScript 5.0+",
  "bundler": "Vite 5.0+",
  "styling": "TailwindCSS 3.4+",
  "stateManagement": "Pinia 2.1+",
  "routing": "Vue Router 4.2+",
  "httpClient": "Axios 1.6+",
  "dataFetching": "TanStack Query Vue 5.0+",
  "formHandling": "VeeValidate 4.11+",
  "validation": "Zod 3.22+",
  "charts": "Chart.js + Vue-Chartjs 5.3+",
  "icons": "Lucide Vue Next 0.300+",
  "testing": "Vitest + Vue Test Utils"
}
```

### é¡¹ç›®ç»“æ„è§„èŒƒ

```
src/
â”œâ”€â”€ components/           # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/              # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â”œâ”€â”€ Modal/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ business/        # ä¸šåŠ¡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ UserProfile/
â”‚   â”‚   â”œâ”€â”€ WorkspaceCard/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ layout/          # å¸ƒå±€ç»„ä»¶
â”‚       â”œâ”€â”€ Header/
â”‚       â”œâ”€â”€ Sidebar/
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ Login/
â”‚   â”‚   â””â”€â”€ Register/
â”‚   â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ workspace/
â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ useWorkspace.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ stores/              # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ workspace.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ services/            # APIæœåŠ¡
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”œâ”€â”€ workspace.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ http.ts          # HTTPå®¢æˆ·ç«¯é…ç½®
â”‚   â””â”€â”€ types.ts         # APIç±»å‹å®šä¹‰
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ format.ts
â”‚   â”œâ”€â”€ validation.ts
â”‚   â””â”€â”€ constants.ts
â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.ts
â”‚   â”œâ”€â”€ workspace.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ styles/              # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ globals.css
â”‚   â””â”€â”€ components.css
â””â”€â”€ App.vue              # åº”ç”¨å…¥å£
```

### ç»„ä»¶å¼€å‘è§„èŒƒ

#### 1. ç»„ä»¶å‘½åè§„èŒƒ

```vue
<!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨PascalCaseæ–‡ä»¶å UserProfile.vue -->
<template>
  <div>{{ user.name }}</div>
</template>

<script setup lang="ts">
interface Props {
  user: User;
}

defineProps<Props>();
</script>

<!-- âŒ é”™è¯¯ï¼šä½¿ç”¨camelCaseæ–‡ä»¶å userProfile.vue -->
```

#### 2. Propsç±»å‹å®šä¹‰

```vue
<!-- âœ… æ­£ç¡®ï¼šæ˜ç¡®çš„Propsæ¥å£å®šä¹‰ -->
<template>
  <div :class="className">
    {{ user.name }}
    <button v-if="onEdit" @click="() => onEdit?.(user)">ç¼–è¾‘</button>
    <slot></slot>
  </div>
</template>

<script setup lang="ts">
interface Props {
  user: User;
  onEdit?: (user: User) => void;
  className?: string;
}

defineProps<Props>();
</script>

<!-- âŒ é”™è¯¯ï¼šä½¿ç”¨anyç±»å‹ -->
<script setup lang="ts">
defineProps<any>();
</script>
```

#### 3. çŠ¶æ€ç®¡ç†è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨Piniaè¿›è¡ŒçŠ¶æ€ç®¡ç†
import { defineStore } from 'pinia';
import { ref, computed } from 'vue';

export const useAuthStore = defineStore('auth', () => {
  const user = ref<User | null>(null);
  const token = ref<string | null>(null);
  const isLoading = ref(false);

  const isAuthenticated = computed(() => !!user.value && !!token.value);

  const login = async (email: string, password: string) => {
    isLoading.value = true;
    try {
      const response = await authApi.login({ email, password });
      user.value = response.user;
      token.value = response.token;
    } catch (error) {
      throw error;
    } finally {
      isLoading.value = false;
    }
  };

  const logout = () => {
    user.value = null;
    token.value = null;
  };

  return {
    user: readonly(user),
    token: readonly(token),
    isLoading: readonly(isLoading),
    isAuthenticated,
    login,
    logout,
  };
});
```

#### 4. ç»„åˆå¼å‡½æ•°è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šç»„åˆå¼å‡½æ•°å‘½åä»¥useå¼€å¤´
import { ref, computed, watch } from 'vue';
import { useQuery } from '@tanstack/vue-query';

export const useWorkspaceData = (workspaceId: Ref<string>) => {
  const { data, isLoading, error } = useQuery({
    queryKey: ['workspace', workspaceId],
    queryFn: () => workspaceApi.getById(workspaceId.value),
    enabled: computed(() => !!workspaceId.value)
  });

  return {
    workspace: computed(() => data.value),
    isLoading,
    error
  };
};

// ä½¿ç”¨ç¤ºä¾‹
// WorkspaceDetail.vue
<template>
  <div>
    <LoadingSpinner v-if="isLoading" />
    <ErrorMessage v-else-if="error" :error="error" />
    <div v-else>{{ workspace?.name }}</div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  id: string;
}

const props = defineProps<Props>();
const workspaceId = toRef(props, 'id');
const { workspace, isLoading, error } = useWorkspaceData(workspaceId);
</script>
```

### CSSå’Œæ ·å¼è§„èŒƒ

#### 1. TailwindCSSä½¿ç”¨è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨Tailwindç±»å
const Button: React.FC<ButtonProps> = ({ variant, size, children }) => {
  const baseClasses = 'inline-flex items-center justify-center rounded-md font-medium transition-colors';

  const variantClasses = {
    primary: 'bg-blue-600 text-white hover:bg-blue-700',
    secondary: 'bg-gray-200 text-gray-900 hover:bg-gray-300',
    outline: 'border border-gray-300 bg-transparent hover:bg-gray-50'
  };

  const sizeClasses = {
    sm: 'h-8 px-3 text-sm',
    md: 'h-10 px-4 text-base',
    lg: 'h-12 px-6 text-lg'
  };

  return (
    <button
      className={cn(
        baseClasses,
        variantClasses[variant],
        sizeClasses[size]
      )}
    >
      {children}
    </button>
  );
};
```

#### 2. å“åº”å¼è®¾è®¡è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
const Dashboard: React.FC = () => {
  return (
    <div className="
      grid
      grid-cols-1
      gap-4
      p-4
      sm:grid-cols-2
      sm:gap-6
      sm:p-6
      lg:grid-cols-3
      lg:gap-8
      lg:p-8
      xl:grid-cols-4
    ">
      {/* å¡ç‰‡å†…å®¹ */}
    </div>
  );
};
```

## ğŸ”§ åç«¯æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

```json
{
  "runtime": "Node.js 20 LTS",
  "language": "TypeScript 5.0+",
  "framework": "Express.js 4.18+",
  "database": "PostgreSQL 17",
  "orm": "TypeORM 0.3.17+",
  "cache": "Redis 7.2+",
  "authentication": "JWT + bcrypt",
  "validation": "Joi 17.11+",
  "documentation": "Swagger/OpenAPI 3.0",
  "testing": "Jest + Supertest",
  "logging": "Winston 3.11+",
  "monitoring": "Prometheus + Grafana"
}
```

### é¡¹ç›®ç»“æ„è§„èŒƒ

```
src/
â”œâ”€â”€ controllers/          # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”œâ”€â”€ workspace.controller.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ services/            # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”œâ”€â”€ workspace.service.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ repositories/        # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ user.repository.ts
â”‚   â”œâ”€â”€ workspace.repository.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”œâ”€â”€ validation.middleware.ts
â”‚   â”œâ”€â”€ error.middleware.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ routes/              # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ auth.routes.ts
â”‚   â”œâ”€â”€ workspace.routes.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”œâ”€â”€ workspace.model.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types/               # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ auth.types.ts
â”‚   â”œâ”€â”€ workspace.types.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ jwt.util.ts
â”‚   â”œâ”€â”€ password.util.ts
â”‚   â”œâ”€â”€ validation.util.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”œâ”€â”€ redis.config.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ entities/            # TypeORMå®ä½“å®šä¹‰
â”‚   â”œâ”€â”€ User.entity.ts
â”‚   â”œâ”€â”€ Workspace.entity.ts
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ migrations/          # TypeORMæ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ *.ts
â””â”€â”€ app.ts               # åº”ç”¨å…¥å£
```

### APIè®¾è®¡è§„èŒƒ

#### 1. RESTful APIè§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šRESTfulè·¯ç”±è®¾è®¡
const workspaceRoutes = {
  'GET /api/v1/workspaces': 'è·å–å·¥ä½œç©ºé—´åˆ—è¡¨',
  'POST /api/v1/workspaces': 'åˆ›å»ºå·¥ä½œç©ºé—´',
  'GET /api/v1/workspaces/:id': 'è·å–ç‰¹å®šå·¥ä½œç©ºé—´',
  'PUT /api/v1/workspaces/:id': 'æ›´æ–°å·¥ä½œç©ºé—´',
  'DELETE /api/v1/workspaces/:id': 'åˆ é™¤å·¥ä½œç©ºé—´',
  'POST /api/v1/workspaces/:id/members': 'æ·»åŠ æˆå‘˜',
  'DELETE /api/v1/workspaces/:id/members/:userId': 'ç§»é™¤æˆå‘˜',
};

// âŒ é”™è¯¯ï¼šéRESTfulè®¾è®¡
const badRoutes = {
  'POST /api/v1/getWorkspaces': 'è·å–å·¥ä½œç©ºé—´åˆ—è¡¨',
  'POST /api/v1/createWorkspace': 'åˆ›å»ºå·¥ä½œç©ºé—´',
  'POST /api/v1/updateWorkspace': 'æ›´æ–°å·¥ä½œç©ºé—´',
};
```

#### 2. ç»Ÿä¸€å“åº”æ ¼å¼

```typescript
// âœ… æ­£ç¡®ï¼šç»Ÿä¸€çš„APIå“åº”æ ¼å¼
interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  error?: {
    code: string;
    message: string;
    details?: any;
  };
  pagination?: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
}

// æˆåŠŸå“åº”
const successResponse = <T>(data: T, message?: string): ApiResponse<T> => ({
  success: true,
  data,
  message,
});

// é”™è¯¯å“åº”
const errorResponse = (code: string, message: string, details?: any): ApiResponse => ({
  success: false,
  error: { code, message, details },
});

// ä½¿ç”¨ç¤ºä¾‹
export const getWorkspaces = async (req: Request, res: Response) => {
  try {
    const workspaces = await workspaceService.getAll(req.user.id);
    res.json(successResponse(workspaces, 'è·å–å·¥ä½œç©ºé—´åˆ—è¡¨æˆåŠŸ'));
  } catch (error) {
    res.status(500).json(errorResponse('INTERNAL_ERROR', 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'));
  }
};
```

#### 3. è¾“å…¥éªŒè¯è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šä½¿ç”¨Joiè¿›è¡Œè¾“å…¥éªŒè¯
import Joi from 'joi';

const createWorkspaceSchema = Joi.object({
  name: Joi.string().min(1).max(100).required().messages({
    'string.empty': 'å·¥ä½œç©ºé—´åç§°ä¸èƒ½ä¸ºç©º',
    'string.max': 'å·¥ä½œç©ºé—´åç§°ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦',
  }),
  description: Joi.string().max(500).optional(),
  isPublic: Joi.boolean().default(false),
});

export const validateCreateWorkspace = (req: Request, res: Response, next: NextFunction) => {
  const { error, value } = createWorkspaceSchema.validate(req.body);

  if (error) {
    return res.status(400).json(errorResponse('VALIDATION_ERROR', 'è¾“å…¥éªŒè¯å¤±è´¥', error.details));
  }

  req.body = value;
  next();
};
```

#### 4. é”™è¯¯å¤„ç†è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†
export class AppError extends Error {
  public readonly statusCode: number;
  public readonly code: string;
  public readonly isOperational: boolean;

  constructor(message: string, statusCode: number, code: string, isOperational = true) {
    super(message);
    this.statusCode = statusCode;
    this.code = code;
    this.isOperational = isOperational;

    Error.captureStackTrace(this, this.constructor);
  }
}

// é¢„å®šä¹‰é”™è¯¯ç±»å‹
export const ErrorTypes = {
  UNAUTHORIZED: (message = 'æœªæˆæƒè®¿é—®') => new AppError(message, 401, 'UNAUTHORIZED'),
  FORBIDDEN: (message = 'ç¦æ­¢è®¿é—®') => new AppError(message, 403, 'FORBIDDEN'),
  NOT_FOUND: (message = 'èµ„æºä¸å­˜åœ¨') => new AppError(message, 404, 'NOT_FOUND'),
  VALIDATION_ERROR: (message = 'è¾“å…¥éªŒè¯å¤±è´¥') => new AppError(message, 400, 'VALIDATION_ERROR'),
  INTERNAL_ERROR: (message = 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯') => new AppError(message, 500, 'INTERNAL_ERROR'),
};

// å…¨å±€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
export const errorHandler = (err: Error, req: Request, res: Response, next: NextFunction) => {
  if (err instanceof AppError) {
    return res.status(err.statusCode).json(errorResponse(err.code, err.message));
  }

  // æœªçŸ¥é”™è¯¯
  logger.error('Unexpected error:', err);
  res.status(500).json(errorResponse('INTERNAL_ERROR', 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯'));
};
```

### æ•°æ®åº“è®¾è®¡è§„èŒƒ

#### 1. TypeORM Entityè§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šæ¸…æ™°çš„TypeORMå®ä½“å®šä¹‰
import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn, UpdateDateColumn, OneToMany } from 'typeorm';
import { UserWorkspace } from './UserWorkspace';
import { LoginSession } from './LoginSession';

export enum UserStatus {
  ACTIVE = 'ACTIVE',
  INACTIVE = 'INACTIVE',
  SUSPENDED = 'SUSPENDED',
}

@Entity('USER', { schema: 'user_management' })
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column({ type: 'varchar', length: 255, unique: true })
  email: string;

  @Column({ name: 'password_hash', type: 'varchar', length: 255 })
  passwordHash: string;

  @Column({ type: 'varchar', length: 100 })
  username: string;

  @Column({ type: 'varchar', length: 20, nullable: true })
  phone: string;

  @Column({ name: 'avatar_url', type: 'text', nullable: true })
  avatarUrl: string;

  @Column({ name: 'email_verified', type: 'boolean', default: false })
  emailVerified: boolean;

  @Column({ name: 'phone_verified', type: 'boolean', default: false })
  phoneVerified: boolean;

  @Column({ type: 'enum', enum: UserStatus, default: UserStatus.ACTIVE })
  status: UserStatus;

  @Column({ name: 'last_login_at', type: 'timestamptz', nullable: true })
  lastLoginAt: Date;

  @Column({ name: 'login_attempts', type: 'int', default: 0 })
  loginAttempts: number;

  @Column({ name: 'locked_until', type: 'timestamptz', nullable: true })
  lockedUntil: Date;

  @CreateDateColumn({ name: 'created_at', type: 'timestamptz' })
  createdAt: Date;

  @UpdateDateColumn({ name: 'updated_at', type: 'timestamptz' })
  updatedAt: Date;

  // å…³è”å…³ç³»
  @OneToMany(() => UserWorkspace, userWorkspace => userWorkspace.user)
  userWorkspaces: UserWorkspace[];

  @OneToMany(() => LoginSession, loginSession => loginSession.user)
  loginSessions: LoginSession[];
}
```

#### 2. æ•°æ®è®¿é—®å±‚è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šRepositoryæ¨¡å¼
import { Repository, DataSource } from 'typeorm';
import { Injectable } from '@nestjs/common';
import { User } from '../entities/User';
import { CreateUserData, UpdateUserData } from '../types/user.types';

@Injectable()
export class UserRepository {
  private repository: Repository<User>;

  constructor(private dataSource: DataSource) {
    this.repository = this.dataSource.getRepository(User);
  }

  async findById(id: number): Promise<User | null> {
    return this.repository.findOne({
      where: { id },
      relations: {
        userWorkspaces: {
          workspace: true,
        },
      },
    });
  }

  async findByEmail(email: string): Promise<User | null> {
    return this.repository.findOne({
      where: { email: email.toLowerCase() },
    });
  }

  async create(data: CreateUserData): Promise<User> {
    const user = this.repository.create({
      ...data,
      email: data.email.toLowerCase(),
    });
    return this.repository.save(user);
  }

  async update(id: number, data: UpdateUserData): Promise<User | null> {
    await this.repository.update(id, data);
    return this.findById(id);
  }

  async delete(id: number): Promise<void> {
    await this.repository.delete(id);
  }

  async findWithRelations(id: number): Promise<User | null> {
    return this.repository.findOne({
      where: { id },
      relations: ['userWorkspaces', 'loginSessions'],
    });
  }
}
```

## ğŸ§ª æµ‹è¯•è§„èŒƒ

### å‰ç«¯æµ‹è¯•è§„èŒƒ

#### 1. ç»„ä»¶æµ‹è¯•

```typescript
// âœ… æ­£ç¡®ï¼šVueç»„ä»¶æµ‹è¯•
import { mount } from '@vue/test-utils';
import { vi } from 'vitest';
import Button from './Button.vue';

describe('Button Component', () => {
  it('should render with correct text', () => {
    const wrapper = mount(Button, {
      slots: {
        default: 'Click me',
      },
    });
    expect(wrapper.text()).toContain('Click me');
  });

  it('should call onClick when clicked', async () => {
    const handleClick = vi.fn();
    const wrapper = mount(Button, {
      props: {
        onClick: handleClick,
      },
      slots: {
        default: 'Click me',
      },
    });

    await wrapper.find('button').trigger('click');

    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('should be disabled when loading', () => {
    const wrapper = mount(Button, {
      props: {
        loading: true,
      },
      slots: {
        default: 'Click me',
      },
    });
    expect(wrapper.find('button').attributes('disabled')).toBeDefined();
  });
});
```

#### 2. ç»„åˆå¼å‡½æ•°æµ‹è¯•

```typescript
// âœ… æ­£ç¡®ï¼šè‡ªå®šä¹‰ç»„åˆå¼å‡½æ•°æµ‹è¯•
import { vi } from 'vitest';
import { createPinia, setActivePinia } from 'pinia';
import { useAuth } from './useAuth';
import { authApi } from '../services/api';

// Mock API
vi.mock('../services/api', () => ({
  authApi: {
    login: vi.fn(),
  },
}));

describe('useAuth Composable', () => {
  beforeEach(() => {
    setActivePinia(createPinia());
  });

  it('should login successfully', async () => {
    const mockLogin = vi.mocked(authApi.login);
    mockLogin.mockResolvedValue({
      user: { id: 1, email: 'test@example.com' },
      token: 'mock-token',
    });

    const { login, user, isAuthenticated } = useAuth();

    await login('test@example.com', 'password');

    expect(user.value).toEqual({
      id: 1,
      email: 'test@example.com',
    });
    expect(isAuthenticated.value).toBe(true);
  });
});
```

### åç«¯æµ‹è¯•è§„èŒƒ

#### 1. å•å…ƒæµ‹è¯•

```typescript
// âœ… æ­£ç¡®ï¼šæœåŠ¡å±‚å•å…ƒæµ‹è¯•
import { AuthService } from '../services/auth.service';
import { UserRepository } from '../repositories/user.repository';
import { ErrorTypes } from '../utils/errors';

// Mock dependencies
jest.mock('../repositories/user.repository');
jest.mock('../utils/password.util');

describe('AuthService', () => {
  let authService: AuthService;
  let mockUserRepository: jest.Mocked<UserRepository>;

  beforeEach(() => {
    mockUserRepository = new UserRepository() as jest.Mocked<UserRepository>;
    authService = new AuthService(mockUserRepository);
  });

  describe('login', () => {
    it('should login successfully with valid credentials', async () => {
      const mockUser = {
        id: 1,
        email: 'test@example.com',
        passwordHash: 'hashed-password',
      };

      mockUserRepository.findByEmail.mockResolvedValue(mockUser);
      (passwordUtil.compare as jest.Mock).mockResolvedValue(true);

      const result = await authService.login('test@example.com', 'password');

      expect(result).toEqual({
        user: expect.objectContaining({ id: 1, email: 'test@example.com' }),
        token: expect.any(String),
      });
    });

    it('should throw error for invalid credentials', async () => {
      mockUserRepository.findByEmail.mockResolvedValue(null);

      await expect(authService.login('test@example.com', 'wrong-password')).rejects.toThrow(
        ErrorTypes.UNAUTHORIZED('é‚®ç®±æˆ–å¯†ç é”™è¯¯')
      );
    });
  });
});
```

#### 2. é›†æˆæµ‹è¯•

```typescript
// âœ… æ­£ç¡®ï¼šAPIé›†æˆæµ‹è¯•
import request from 'supertest';
import { app } from '../app';
import { prisma } from '../config/database';

describe('Auth API', () => {
  beforeEach(async () => {
    // æ¸…ç†æµ‹è¯•æ•°æ®
    await dataSource.getRepository(User).clear();
  });

  afterAll(async () => {
    await dataSource.destroy();
  });

  describe('POST /api/v1/auth/register', () => {
    it('should register a new user successfully', async () => {
      const userData = {
        email: 'test@example.com',
        password: 'Password123!',
        username: 'testuser',
      };

      const response = await request(app).post('/api/v1/auth/register').send(userData).expect(201);

      expect(response.body).toEqual({
        success: true,
        data: {
          user: expect.objectContaining({
            email: 'test@example.com',
            username: 'testuser',
          }),
          token: expect.any(String),
        },
        message: 'æ³¨å†ŒæˆåŠŸ',
      });
    });

    it('should return error for duplicate email', async () => {
      // å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·
      const userRepo = dataSource.getRepository(User);
      await userRepo.save({
        email: 'test@example.com',
        passwordHash: 'hashed',
        username: 'existing',
      });

      const response = await request(app)
        .post('/api/v1/auth/register')
        .send({
          email: 'test@example.com',
          password: 'Password123!',
          username: 'newuser',
        })
        .expect(400);

      expect(response.body.success).toBe(false);
      expect(response.body.error.code).toBe('EMAIL_EXISTS');
    });
  });
});
```

## ğŸ“ ä»£ç è§„èŒƒ

### é€šç”¨è§„èŒƒ

#### 1. å‘½åè§„èŒƒ

```typescript
// âœ… æ­£ç¡®çš„å‘½å
const MAX_RETRY_COUNT = 3; // å¸¸é‡ï¼šSCREAMING_SNAKE_CASE
const userName = 'john'; // å˜é‡ï¼šcamelCase
const UserProfile = () => {}; // ç»„ä»¶ï¼šPascalCase
const getUserById = () => {}; // å‡½æ•°ï¼šcamelCase
interface UserData {} // æ¥å£ï¼šPascalCase
type ApiResponse<T> = {}; // ç±»å‹ï¼šPascalCase
enum UserStatus {} // æšä¸¾ï¼šPascalCase

// âŒ é”™è¯¯çš„å‘½å
const max_retry_count = 3; // åº”è¯¥ä½¿ç”¨SCREAMING_SNAKE_CASE
const UserName = 'john'; // åº”è¯¥ä½¿ç”¨camelCase
const userProfile = () => {}; // ç»„ä»¶åº”è¯¥ä½¿ç”¨PascalCase
const GetUserById = () => {}; // å‡½æ•°åº”è¯¥ä½¿ç”¨camelCase
```

#### 2. æ³¨é‡Šè§„èŒƒ

```typescript
/**
 * ç”¨æˆ·è®¤è¯æœåŠ¡
 * æä¾›ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€å¯†ç é‡ç½®ç­‰åŠŸèƒ½
 */
export class AuthService {
  /**
   * ç”¨æˆ·ç™»å½•
   * @param email ç”¨æˆ·é‚®ç®±
   * @param password ç”¨æˆ·å¯†ç 
   * @returns åŒ…å«ç”¨æˆ·ä¿¡æ¯å’ŒJWTä»¤ç‰Œçš„å¯¹è±¡
   * @throws {AppError} å½“é‚®ç®±æˆ–å¯†ç é”™è¯¯æ—¶æŠ›å‡ºUNAUTHORIZEDé”™è¯¯
   */
  async login(email: string, password: string): Promise<LoginResult> {
    // éªŒè¯é‚®ç®±æ ¼å¼
    if (!this.isValidEmail(email)) {
      throw ErrorTypes.VALIDATION_ERROR('é‚®ç®±æ ¼å¼ä¸æ­£ç¡®');
    }

    // æŸ¥æ‰¾ç”¨æˆ·
    const user = await this.userRepository.findByEmail(email);
    if (!user) {
      throw ErrorTypes.UNAUTHORIZED('é‚®ç®±æˆ–å¯†ç é”™è¯¯');
    }

    // TODO: æ·»åŠ ç™»å½•å¤±è´¥æ¬¡æ•°é™åˆ¶
    // FIXME: å¯†ç æ¯”è¾ƒé€»è¾‘éœ€è¦ä¼˜åŒ–æ€§èƒ½

    return { user, token };
  }
}
```

#### 3. å¯¼å…¥å¯¼å‡ºè§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šæ¸…æ™°çš„å¯¼å…¥é¡ºåº
// 1. Node.jså†…ç½®æ¨¡å—
import { readFileSync } from 'fs';
import { join } from 'path';

// 2. ç¬¬ä¸‰æ–¹åº“
import express from 'express';
import { DataSource } from 'typeorm';
import bcrypt from 'bcrypt';

// 3. é¡¹ç›®å†…éƒ¨æ¨¡å—ï¼ˆæŒ‰å±‚çº§æ’åºï¼‰
import { AuthService } from '../services/auth.service';
import { UserRepository } from '../repositories/user.repository';
import { validateLogin } from '../middleware/validation.middleware';
import { ErrorTypes } from '../utils/errors';
import type { LoginRequest, LoginResponse } from '../types/auth.types';

// âœ… æ­£ç¡®ï¼šæ˜ç¡®çš„å¯¼å‡º
export { AuthController } from './auth.controller';
export { WorkspaceController } from './workspace.controller';
export type { ControllerResponse } from './types';

// âŒ é”™è¯¯ï¼šæ··ä¹±çš„å¯¼å…¥é¡ºåº
import { AuthService } from '../services/auth.service';
import express from 'express';
import { validateLogin } from '../middleware/validation.middleware';
import { readFileSync } from 'fs';
```

### TypeScriptè§„èŒƒ

#### 1. ç±»å‹å®šä¹‰è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šæ˜ç¡®çš„ç±»å‹å®šä¹‰
interface User {
  readonly id: number;
  email: string;
  username: string;
  createdAt: Date;
  updatedAt: Date;
}

interface CreateUserRequest {
  email: string;
  password: string;
  username: string;
}

interface UpdateUserRequest {
  username?: string;
  email?: string;
}

type UserStatus = 'active' | 'inactive' | 'suspended';

// æ³›å‹ç±»å‹
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  message?: string;
  error?: ApiError;
}

// å·¥å…·ç±»å‹çš„ä½¿ç”¨
type UserPublicInfo = Pick<User, 'id' | 'email' | 'username'>;
type UserUpdateData = Partial<Pick<User, 'email' | 'username'>>;

// âŒ é”™è¯¯ï¼šä½¿ç”¨anyç±»å‹
interface BadUser {
  id: any;
  data: any;
  metadata: any;
}
```

#### 2. å‡½æ•°ç±»å‹è§„èŒƒ

```typescript
// âœ… æ­£ç¡®ï¼šæ˜ç¡®çš„å‡½æ•°ç±»å‹
type EventHandler<T> = (event: T) => void;
type AsyncOperation<T, R> = (input: T) => Promise<R>;
type Validator<T> = (value: T) => boolean;

// å‡½æ•°é‡è½½
function formatDate(date: Date): string;
function formatDate(date: string): string;
function formatDate(date: Date | string): string {
  const d = typeof date === 'string' ? new Date(date) : date;
  return d.toISOString().split('T')[0];
}

// æ¡ä»¶ç±»å‹
type NonNullable<T> = T extends null | undefined ? never : T;
type ApiResult<T> = T extends string ? { message: T } : { data: T };
```

## ğŸ”§ å¼€å‘å·¥å…·é…ç½®

### ESLinté…ç½®

```json
{
  "extends": ["@typescript-eslint/recommended", "@typescript-eslint/recommended-requiring-type-checking", "prettier"],
  "parser": "@typescript-eslint/parser",
  "parserOptions": {
    "ecmaVersion": 2022,
    "sourceType": "module",
    "project": "./tsconfig.json"
  },
  "plugins": ["@typescript-eslint", "import"],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/explicit-function-return-type": "warn",
    "@typescript-eslint/no-non-null-assertion": "error",
    "import/order": [
      "error",
      {
        "groups": ["builtin", "external", "internal", "parent", "sibling", "index"],
        "newlines-between": "always"
      }
    ],
    "prefer-const": "error",
    "no-var": "error",
    "no-console": "warn"
  }
}
```

### Prettieré…ç½®

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 100,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
```

### Git Hooksé…ç½®

```json
{
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged",
      "commit-msg": "commitlint -E HUSKY_GIT_PARAMS"
    }
  },
  "lint-staged": {
    "*.{ts,tsx,js,jsx}": ["eslint --fix", "prettier --write", "git add"],
    "*.{json,md,yml,yaml}": ["prettier --write", "git add"]
  }
}
```

### æäº¤ä¿¡æ¯è§„èŒƒ

```bash
# æäº¤ä¿¡æ¯æ ¼å¼
<type>(<scope>): <subject>

<body>

<footer>

# ç±»å‹è¯´æ˜
feat:     æ–°åŠŸèƒ½
fix:      ä¿®å¤bug
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
perf:     æ€§èƒ½ä¼˜åŒ–
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹
feat(auth): add user registration functionality

- Add user registration API endpoint
- Implement email validation
- Add password strength requirements
- Update user model with new fields

Closes #123
```

## ğŸ“š æ–‡æ¡£è§„èŒƒ

### APIæ–‡æ¡£è§„èŒƒ

```typescript
/**
 * @swagger
 * /api/v1/auth/login:
 *   post:
 *     summary: ç”¨æˆ·ç™»å½•
 *     tags: [Authentication]
 *     requestBody:
 *       required: true
 *       content:
 *         application/json:
 *           schema:
 *             type: object
 *             required:
 *               - email
 *               - password
 *             properties:
 *               email:
 *                 type: string
 *                 format: email
 *                 description: ç”¨æˆ·é‚®ç®±
 *                 example: user@example.com
 *               password:
 *                 type: string
 *                 minLength: 8
 *                 description: ç”¨æˆ·å¯†ç 
 *                 example: Password123!
 *     responses:
 *       200:
 *         description: ç™»å½•æˆåŠŸ
 *         content:
 *           application/json:
 *             schema:
 *               type: object
 *               properties:
 *                 success:
 *                   type: boolean
 *                   example: true
 *                 data:
 *                   type: object
 *                   properties:
 *                     user:
 *                       $ref: '#/components/schemas/User'
 *                     token:
 *                       type: string
 *                       description: JWTè®¿é—®ä»¤ç‰Œ
 *                 message:
 *                   type: string
 *                   example: ç™»å½•æˆåŠŸ
 *       401:
 *         description: è®¤è¯å¤±è´¥
 *         content:
 *           application/json:
 *             schema:
 *               $ref: '#/components/schemas/ErrorResponse'
 */
export const login = async (req: Request, res: Response) => {
  // å®ç°é€»è¾‘
};
```

### READMEæ–‡æ¡£æ¨¡æ¿

````markdown
# Zerocut è§†é¢‘Agentç®¡ç†å¹³å°

## ğŸ“– é¡¹ç›®ç®€ä»‹

ç®€è¦æè¿°é¡¹ç›®çš„ç›®çš„ã€åŠŸèƒ½å’Œç‰¹ç‚¹ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 20+
- PostgreSQL 17+
- Redis 7+
- Docker (å¯é€‰)

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd zerocut-platform
```
````

2. å®‰è£…ä¾èµ–

```bash
npm install
```

3. ç¯å¢ƒé…ç½®

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

4. æ•°æ®åº“åˆå§‹åŒ–

```bash
npm run db:migrate
npm run db:seed
```

5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ frontend/          # å‰ç«¯ä»£ç 
â”œâ”€â”€ backend/           # åç«¯ä»£ç 
â”œâ”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ docker/            # Dockeré…ç½®
â””â”€â”€ scripts/           # æ„å»ºè„šæœ¬
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- ç¼–å†™å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### æäº¤è§„èŒƒ

ä½¿ç”¨ Conventional Commits è§„èŒƒï¼š

```
feat(scope): add new feature
fix(scope): fix bug
docs(scope): update documentation
```

## ğŸ“Š APIæ–‡æ¡£

å¼€å‘ç¯å¢ƒAPIæ–‡æ¡£åœ°å€ï¼šhttp://localhost:3000/api-docs

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e
```

## ğŸš€ éƒ¨ç½²

### Dockeréƒ¨ç½²

```bash
docker-compose up -d
```

### æ‰‹åŠ¨éƒ¨ç½²

```bash
npm run build
npm run start:prod
```

## ğŸ“„ è®¸å¯è¯

MIT License

```

## ğŸ¯ æ€»ç»“

æœ¬æŠ€æœ¯æ ˆé€‰å‹å’Œå¼€å‘è§„èŒƒæ–‡æ¡£æ¶µç›–äº†ï¼š

1. **æŠ€æœ¯é€‰å‹åŸåˆ™**ï¼šåŸºäºæˆç†Ÿåº¦ã€æ€§èƒ½ã€å›¢é˜Ÿç†Ÿæ‚‰åº¦ç­‰å› ç´ 
2. **å‰ç«¯æŠ€æœ¯æ ˆ**ï¼šReact + TypeScript + TailwindCSS + Zustand
3. **åç«¯æŠ€æœ¯æ ˆ**ï¼šNode.js + Express + PostgreSQL + TypeORM
4. **ä»£ç è§„èŒƒ**ï¼šå‘½åã€æ³¨é‡Šã€å¯¼å…¥å¯¼å‡ºã€ç±»å‹å®šä¹‰ç­‰
5. **æµ‹è¯•è§„èŒƒ**ï¼šå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•
6. **å¼€å‘å·¥å…·**ï¼šESLintã€Prettierã€Git Hooksé…ç½®
7. **æ–‡æ¡£è§„èŒƒ**ï¼šAPIæ–‡æ¡£ã€READMEæ–‡æ¡£æ¨¡æ¿

é€šè¿‡éµå¾ªè¿™äº›è§„èŒƒï¼Œå¯ä»¥ç¡®ä¿ï¼š
- ä»£ç è´¨é‡å’Œä¸€è‡´æ€§
- å›¢é˜Ÿåä½œæ•ˆç‡
- é¡¹ç›®å¯ç»´æŠ¤æ€§
- å¼€å‘ä½“éªŒä¼˜åŒ–
- é•¿æœŸæŠ€æœ¯å€ºåŠ¡æ§åˆ¶

å»ºè®®åœ¨é¡¹ç›®å¼€å§‹å‰ï¼Œå›¢é˜Ÿæˆå‘˜å…±åŒå­¦ä¹ å’Œç¡®è®¤è¿™äº›è§„èŒƒï¼Œå¹¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸¥æ ¼æ‰§è¡Œã€‚
```
